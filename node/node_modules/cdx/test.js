// Generated by CoffeeScript 1.9.1
(function() {
  var JSONStream, adhocStream, cdx, fs, blacklist;

  blacklist = ['www.hyves', 'cache.hyves', 'hyves-static', 'metadata://'];

  cdx = require("./");

  fs = require("fs");

  adhocStream = require("adhoc-stream");

  JSONStream = require("JSONStream");

  fs.createReadStream("../../archiveteam_hyves_20131201214204.cdx").pipe(cdx()).pipe(adhocStream.transformSync({
    objectMode: true
  }, function(chunk) {

      var found = blacklist.reduce(function(found, item) {
          return found || chunk.data.originalURL.indexOf(item);
      }, false);

      if(!found) {
        return this.push(chunk.data);
      }
      return null;

  })).pipe(JSONStream.stringify(false)).pipe(process.stdout);

}).call(this);
